<style>
  
  .tunnel-control-bar {
    text-align: center;
  }

  .dont-nearly-give-me-the-bird {
    cursor: default;
  }

  /* inputs on tunnel form for hostname and port */

  .no-style {
    background: transparent;
    outline: 0;
    border: 0;
  }

  a.bg-black {
    background: transparent !important;
    background-color: transparent !important;
  }

</style>

<div class="box-header ui-sortable-handle" style="cursor: move;">
  <i class="fa fa-th"></i>
  <h3 class="box-title">tunnel{{!selectedTunnel ? '' : ': ' + selectedTunnel.name}}</h3>
</div>
<div class="box-body table-responsive">
  <table class="table">
    <tbody>

    <tr class="underline" ng-if="selectedTunnel.state.value == 'open'">
      <td>status</td>
      <td width='50%'>open for {{timestamp.toAge(selectedTunnel.state.timestamp)}}</td>
    </tr>

    <tr class="underline" ng-if="selectedTunnel.state.value == 'closed'">
      <td>status</td>
      <td class="text-yellow" width='50%'>closed for {{timestamp.toAge(selectedTunnel.state.timestamp)}}</td>
    </tr>

    <tr class="underline" ng-if="selectedTunnel.state.value == 'error'">
      <td>status</td>
      <td class="text-red" width='50%'>errored for {{timestamp.toAge(selectedTunnel.state.timestamp)}}</td>
    </tr>

    <tr class="underline" ng-if="selectedTunnel.state.value == 'reset'">
      <td>status</td>
      <td class="text-red" width='50%'>resetting for {{timestamp.toAge(selectedTunnel.state.timestamp)}}</td>
    </tr>

    <tr ng-if="selectedTunnel.state.value == 'error'">
      <td class="text-red">error</td>
      <td class="text-red">{{selectedTunnel.state.error.message}}</td>
    </tr>

    <tr>
      <td>id</td>
      <td>{{selectedTunnel.id}}</td>
    </tr>

    <tr>
      <td>description</td>
      <td>{{selectedTunnel.description}}</td>
    </tr>

    <tr>
      <td>created</td>
      <td>{{timestamp.toAge(selectedTunnel.created)}} ago</td>
    </tr>

    <tr>
      <td>latency</td>
      <td>{{selectedTunnel.health.latency == -1 ? '_' : selectedTunnel.health.latency}}ms ({{timestamp.toAge(selectedTunnel.health.timestamp)}} ago)</td>
    </tr>

    <tr ng-class="{'text-red': selectedTunnel.failures.count > 0}">
      <td>failures</td>
      <td>{{selectedTunnel.failures.count}} {{selectedTunnel.failures.timestamp ? ' (last ' + timestamp.toAge(selectedTunnel.failures.timestamp) + ' ago)' : ''}}</td>
    </tr>


    <tr ng-if="selectedTunnel.state.value == 'open'">
      <td>forwarding url</td>
      <td><a ng-href="{{url()}}" target="_blank">{{url()}}</a></td>
    </tr>


    <tr ng-if="selectedTunnel.state.value == 'closed' || selectedTunnel.state.value == 'error'">
      <td>forwarding hostname</td>
      <td><input class="no-style" type="text" ng-model="forwarding.hostname"></input></td>
    </tr>
    <tr ng-if="selectedTunnel.state.value == 'closed' || selectedTunnel.state.value == 'error'">
      <td>forwarding port</td>
      <td><input class="no-style" type="text" ng-model="forwarding.port"></input></td>
    </tr>



    <tr ng-if="selectedTunnel.state.value == 'open'">
      <td colspan="2" class="tunnel-control-bar">
        <button class="btn bg-black btn-lg dont-nearly-give-me-the-bird" ng-click="noop()">
          <i class="fa fa-play text-muted"></i>
        </button>
        <button class="btn bg-black btn-lg" ng-click="closeSelectedTunnel()">
          <i class="fa fa-pause text-yellow"></i>
        </button>
        <button class="btn bg-black btn-lg" ng-click="resetSelectedTunnel()">
          <i class="fa fa-eject text-red"></i>
        </button>
      </td>
    </tr>


    <tr ng-if="selectedTunnel.state.value == 'closed' || selectedTunnel.state.value == 'error'">
      <td colspan="2" class="tunnel-control-bar">
        <button class="btn bg-black btn-lg" ng-click="openSelectedTunnel()">
          <i class="fa fa-play text-green"></i>
        </button>
        <button class="btn bg-black btn-lg dont-nearly-give-me-the-bird" ng-click="noop()">
          <i class="fa fa-pause text-muted"></i>
        </button>
        <button class="btn bg-black btn-lg" ng-click="resetSelectedTunnel()">
          <i class="fa fa-eject text-red"></i>
        </button>
      </td>
    </tr>

    <tr ng-if="selectedTunnel.state.value == 'reset'">
      <td colspan="2" class="tunnel-control-bar">
        <button class="btn bg-black btn-lg dont-nearly-give-me-the-bird" ng-click="noop()">
          <i class="fa fa-play text-muted"></i>
        </button>
        <button class="btn bg-black btn-lg dont-nearly-give-me-the-bird" ng-click="noop()">
          <i class="fa fa-pause text-muted"></i>
        </button>
        <button class="btn bg-black btn-lg dont-nearly-give-me-the-bird" ng-click="noop()">
          <i class="fa fa-eject text-muted"></i>
        </button>
      </td>
    </tr>







  </tbody></table>
</div>

